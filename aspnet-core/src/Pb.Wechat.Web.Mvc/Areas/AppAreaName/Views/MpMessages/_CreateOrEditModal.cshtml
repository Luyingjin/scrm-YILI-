@using Pb.Wechat
@using Pb.Wechat.MpMessages.Dto
@using Pb.Wechat.Web.Areas.AppAreaName.Models.Common.Modals
@using Pb.Wechat.Web.Areas.AppAreaName.Models.MpMessages
@using Pb.Wechat.Web.Areas.AppAreaName.Models.MpGroups
@model CreateOrEditMpMessageViewModel

<style type="text/css">
    .modal-dialog {
        width: 600px;
      
    }
</style>
@Html.Partial("~/Areas/AppAreaName/Views/Common/Modals/_ModalHeader.cshtml", new ModalHeaderViewModel(Model.IsEditMode ? (L("Edit")) : L("Create")))

<div class="modal-body">
    <form name="DataForm" role="form" novalidate class="form-validation">
        @if (Model.IsEditMode)
    {
        <input type="hidden" name="Id" value="@Model.Id" />
}
        <input type="hidden" name="MpID" value="@Model.MpID" />
        <input type="hidden" name="GroupID" value="@Model.GroupID" />
        <input type="hidden" name="GroupName" value="@Model.GroupName" />
        <input type="hidden" name="MessageType" required value="@Model.MessageType" />
        <input type="hidden" name="Sex" value="@Model.Sex" />
        <input type="hidden" name="Country" value="@Model.Country" />
        <input type="hidden" name="Province" value="@Model.Province" />
        <input type="hidden" name="City" value="@Model.City" />
        <input type="hidden" name="FirstLevelGroup" value="@Model.FirstLevelGroup" />
        <input type="hidden" name="ImageID" value="@Model.ImageID" />
        <input type="hidden" name="ImageName" value="@Model.ImageName" />
        <input type="hidden" name="ImageMediaID" value="@Model.ImageMediaID" />
        <input type="hidden" name="VideoID" value="@Model.VideoID" />
        <input type="hidden" name="VideoMediaID" value="@Model.VideoMediaID" />
        <input type="hidden" name="VideoName" value="@Model.VideoName" />
        <input type="hidden" name="VoiceID" value="@Model.VoiceID" />
        <input type="hidden" name="VoiceMediaID" value="@Model.VoiceMediaID" />
        <input type="hidden" name="VoiceName" value="@Model.VoiceName" />
        <input type="hidden" name="ArticleGroupID" value="@Model.ArticleGroupID" />
        <input type="hidden" name="ArticleGroupMediaID" value="@Model.ArticleGroupMediaID" />
        <input type="hidden" name="ArticleGroupName" value="@Model.ArticleGroupName" />
        <input type="hidden" name="ArticleID" value="@Model.ArticleID" />
        <input type="hidden" name="ArticleMediaID" value="@Model.ArticleMediaID" />
        <input type="hidden" name="ArticleName" value="@Model.ArticleName" />
        <input type="hidden" name="Content" value="@Model.Content" />


        <input type="hidden" name="IsMember" value="@Model.IsMember" />
        <input type="hidden" name="BaySex" value="@Model.BaySex" />
        <input type="hidden" name="OrganizeCity" value="@Model.OrganizeCity" />
        <input type="hidden" name="OfficialCity" value="@Model.OfficialCity" />
        <input type="hidden" name="LastBuyProduct" value="@Model.LastBuyProduct" />
        <input type="hidden" name="MemberCategory" value="@Model.MemberCategory" />
        <input type="hidden" name="BeginBabyBirthday" value="@Model.BeginBabyBirthday" />
        <input type="hidden" name="EndBabyBirthday" value="@Model.EndBabyBirthday" />
        <input type="hidden" name="BeginPointsBalance" value="@Model.BeginPointsBalance" />
        <input type="hidden" name="EndPointsBalance" value="@Model.EndPointsBalance" />
        <input type="hidden" name="ChannelID" value="@Model.ChannelID" />
        <input type="hidden" name="ChannelName" value="@Model.ChannelName" />
        <input type="hidden" name="TargetID" value="@Model.TargetID" />
        <input type="hidden" name="TargetName" value="@Model.TargetName" />
        <input type="hidden" name="MotherType" value="@Model.MotherType" />
        <input type="hidden" name="GroupIds" value="@Model.GroupIds" />
        <input type="hidden" name="TargetID" value="@Model.TargetID" />
        <input type="hidden" name="TargetName" value="@Model.TargetName" />
        <input type="hidden" name="IsTask" value="0" />


        <div class="form-group col-md-12">
            <div class="col-md-6">
                <label for="GroupNames">群发对象</label>
                <select class="form-control" id="sendELE">
                    <option value="0">所有粉丝</option>
                    <option value="1">按分组推送</option>
                </select>
            </div>

        </div>
        <div class="form-group col-md-12" id="groupDiv" style="display:none;">
            <div class="col-md-6">
                <label for="GroupNames">会员分类</label>
                <select class="form-control" id="firstlevelgroup"></select>
            </div>
            <div class="col-md-6">
                <label for="GroupNames">分组选择</label>
                <select class="form-control" id="secondlevelgroup" multiple="multiple" style="width:100%;"></select>
            </div>
        </div>
        <div class="col-md-12">
            <div class="col-md-4">
                <input type="radio" name="ts" value="0" checked />即时推送
                <input type="radio" name="ts" value="1" />定时推送
            </div>
            <div class="col-md-8 sendTimeDiv " style="display:none;">
                发送时间：<input type="datetime" name="ExecTaskTime" class="datetime-picker" style="width:75%;">
            </div>
        </div>
    </form>
    @*<div class="col-md-12">
            @Html.Partial("~/Areas/AppAreaName/Views/MpGroups/_GroupTree.cshtml", new GroupTreeItemModel() { ModelList = Model.GroupModels, Id = 0, Name = "", SelectedItems = Model.SelectGroupIds })
        </div>*@
    <div id="partialView" class="col-md-12" style="margin-bottom:20px;"></div>
</div>
<div class="modal-footer">
    <button type="button" class="btn blue preview-button"><i class="fa fa-search"></i> <span>预览</span></button>
    <button type="button" class="btn blue save-button"><i class="fa fa-save"></i> <span>群发</span></button>
    <button type="button" class="btn default close-button" data-dismiss="modal">@L("Cancel")</button>
</div>